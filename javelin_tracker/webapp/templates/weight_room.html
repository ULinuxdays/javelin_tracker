{% extends "app_base.html" %}

{% block content %}
<section class="panel">
  <header class="panel-header">
    <div>
      <h3>Weight room</h3>
      <p class="muted">Plan, log, and review strength work alongside throws.</p>
    </div>
  </header>
  {% if dashboard_onboarding and dashboard_onboarding.demo_data_active %}
  <div class="panel-note muted small">Demo plans/logs are shown for preview. They will be cleared when you log your own strength work.</div>
  {% endif %}

  <div class="metrics-grid compact">
    <article class="metric-card">
      <p class="metric-label">Strength sessions</p>
      <div class="metric-value">--</div>
      <p class="metric-sub">Logged this block</p>
    </article>
    <article class="metric-card">
      <p class="metric-label">Total sets</p>
      <div class="metric-value">--</div>
      <p class="metric-sub">Across recorded lifts</p>
    </article>
    <article class="metric-card">
      <p class="metric-label">Primary lift</p>
      <div class="metric-value">--</div>
      <p class="metric-sub">Most logged exercise</p>
    </article>
  </div>

  <div class="split-grid">
    <div class="subpanel">
      <header class="panel-header">
        <div>
          <h4>Daily plan</h4>
          <p class="muted">Generate guidance tied to throw progress.</p>
        </div>
      </header>
      <form id="dailyPlanForm" class="stack-form">
        <div class="form-grid">
          <label class="full">
            <span>Athlete</span>
            <div class="athlete-select-wrapper" data-athlete-select-wrapper>
              <select name="athlete" id="dailyPlanAthlete" data-logged-athlete-select>
                <option value="">Select athlete</option>
              </select>
              <input class="athlete-custom-input" type="text" placeholder="Add new athlete" data-logged-athlete-input />
            </div>
          </label>
        </div>
        <button type="submit" class="btn btn-primary">Build plan</button>
      </form>
      <div id="dailyPlan" class="muted panel-note">No plan available yet.</div>
    </div>

    <div class="subpanel">
      <header class="panel-header">
        <div>
          <h4>Quick log</h4>
          <p class="muted">Log the sets from today’s plan without retyping names.</p>
        </div>
      </header>
      <div id="dailyPlanLogPanel" class="muted panel-note">Generate a plan to unlock quick logging.</div>
    </div>
  </div>
</section>

<section class="panel">
  <header class="panel-header">
    <div>
      <h3>Manual lift entry</h3>
      <p class="muted">Record ad-hoc sets or accessories.</p>
    </div>
  </header>
  <form class="stack-form" data-lift-form data-status-target="weightRoomLiftStatus">
    <div class="form-grid">
      <label>
        <span>Athlete</span>
        <div class="athlete-select-wrapper" data-athlete-select-wrapper>
          <select name="athlete" data-logged-athlete-select>
            <option value="">Select athlete</option>
          </select>
          <input class="athlete-custom-input" type="text" placeholder="Add new athlete" data-logged-athlete-input />
        </div>
      </label>
      <label>
        <span>Exercise</span>
        <input type="text" name="exercise" placeholder="Back squat" required />
      </label>
      <label>
        <span>Weight (kg)</span>
        <input type="number" step="0.5" name="weight_kg" required />
      </label>
      <label>
        <span>Reps</span>
        <input type="number" name="reps" required />
      </label>
      <label>
        <span>Date</span>
        <input type="date" name="date" />
      </label>
      <label>
        <span>Notes</span>
        <input type="text" name="notes" placeholder="RPE, tempo, cues" />
      </label>
    </div>
    <div class="form-actions">
      <button type="submit" class="btn btn-primary">Log set</button>
      <p class="muted small" id="weightRoomLiftStatus">Ready</p>
    </div>
  </form>
</section>

<section class="panel">
  <header class="panel-header">
    <div>
      <h3>Recent strength sessions</h3>
      <p class="muted">Track load and density across the weight room.</p>
    </div>
    <label class="input-label">
      Athlete
      <select id="strengthFilter"></select>
    </label>
  </header>
  <div class="table-wrapper">
    <table class="data-table">
      <thead>
        <tr>
          <th>Date</th>
          <th>Athlete</th>
          <th>Lift</th>
          <th>Sets × reps</th>
          <th>Load</th>
          <th>Notes</th>
        </tr>
      </thead>
      <tbody id="strengthTable">
        <tr><td colspan="6">No workout sets recorded yet.</td></tr>
      </tbody>
    </table>
  </div>
</section>
{% endblock %}
